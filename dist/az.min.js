!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Az",t):e.Az=t()}(this,function(){"use strict";if("undefined"!=typeof require&&"object"==typeof exports&&"undefined"!=typeof module)var e=require("fs");var t={load:function(t,s,i){if(e)return void e.readFile(t,{encoding:"json"==s?"utf8":null},function(e,t){return e?void i(e):void("json"==s?i(null,JSON.parse(t)):"arraybuffer"==s?i(null,t.buffer):i(new Error("Unknown responseType")))});var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=s,n.onload=function(e){n.response&&i&&i(null,n.response)},n.send(null)}};return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.DAWG=t(module.exports)):"function"==typeof define&&define.amd?define("Az.DAWG",["Az"],t):(e.Az=e.Az||{})&&(e.Az.DAWG=t(e.Az))}(this,function(e){"use strict";function t(e){return e>>10<<((e&h)>>6)&r}function s(e){return e&(255|p)&r}function i(e){return 0!=(e&l&r)}function n(e){return e&~p&r}var o=0,a=-1,r=4294967295,l=256,h=512,p=1<<31,u={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,1027:129,8225:135,1046:198,8222:132,1047:199,1168:165,1048:200,1113:154,1049:201,1045:197,1050:202,1028:170,160:160,1040:192,1051:203,164:164,166:166,167:167,169:169,171:171,172:172,173:173,174:174,1053:205,176:176,177:177,1114:156,181:181,182:182,183:183,8221:148,187:187,1029:189,1056:208,1057:209,1058:210,8364:136,1112:188,1115:158,1059:211,1060:212,1030:178,1061:213,1062:214,1063:215,1116:157,1064:216,1065:217,1031:175,1066:218,1067:219,1068:220,1069:221,1070:222,1032:163,8226:149,1071:223,1072:224,8482:153,1073:225,8240:137,1118:162,1074:226,1110:179,8230:133,1075:227,1033:138,1076:228,1077:229,8211:150,1078:230,1119:159,1079:231,1042:194,1080:232,1034:140,1025:168,1081:233,1082:234,8212:151,1083:235,1169:180,1084:236,1052:204,1085:237,1035:142,1086:238,1087:239,1088:240,1089:241,1090:242,1036:141,1041:193,1091:243,1092:244,8224:134,1093:245,8470:185,1094:246,1054:206,1095:247,1096:248,8249:139,1097:249,1098:250,1044:196,1099:251,1111:191,1055:207,1100:252,1038:161,8220:147,1101:253,8250:155,1102:254,8216:145,1103:255,1043:195,1105:184,1039:143,1026:128,1106:144,8218:130,1107:131,8217:146,1108:186,1109:190},c={"й":"ёцыф","ц":"йфыву","у":"цывак","к":"увапе","е":"капрн","н":"епрог","г":"нролш","ш":"голдщ","щ":"шлджз","з":"щджэх-","х":"зжэъ-","ъ":"хэ-ё","ф":"йцычяё","ы":"йцувсчяф","в":"цукамсчы","а":"укепимсв","п":"кенртима","р":"енгоьтип","о":"нгшлбьтр","л":"гшщдюбьо","д":"шщзжюбл","ж":"щзхэюд","э":"зхъжё","ё":"йфяъэ","я":"ёфыч","ч":"яфывс","с":"чывам","м":"свапи","и":"мапрт","т":"ипроь","ь":"тролб","б":"ьолдю","ю":"блдж",1:"ёйц",2:"йцу",3:"цук",4:"уке",5:"кен",6:"енг",7:"нгш",8:"гшщ",9:"шщз",0:"щзх-","-":"зхъ","=":"-хъ","\\":"ъэ",".":"южэ"},f=function(e,t,s){this.units=e,this.guide=t,this.format=s};return f.fromArrayBuffer=function(e,t){var s=new DataView(e),i=s.getUint32(0,!0),n=s.getUint32(4*i+4,!0);return new f(new Uint32Array(e,4,i),new Uint8Array(e,4*i+8,2*n),t)},f.load=function(t,s,i){e.load(t,"arraybuffer",function(e,t){i(e,e?null:f.fromArrayBuffer(t,s))})},f.prototype.followByte=function(e,i){var n=t(this.units[i]),o=(i^n^255&e)&r;return s(this.units[o])!=(255&e)?a:o},f.prototype.followString=function(e,t){t=t||o;for(var s=0;s<e.length;s++){var i=e.charCodeAt(s);if(!(i in u))return a;if(t=this.followByte(u[i],t),t==a)return a}return t},f.prototype.hasValue=function(e){return i(this.units[e])},f.prototype.value=function(e){var s=t(this.units[e]),i=(e^s)&r;return n(this.units[i])},f.prototype.find=function(e){var t=this.followString(e);return t==a?a:this.hasValue(t)?this.value(t):a},f.prototype.iterateAll=function(e){for(var t,s=[],i=[e],n=[],r=o;;){if(e=i[i.length-1],r!=o)if(t=this.guide[e<<1]){if(e=this.followByte(t,e),e==a)return s;n.push(t),i.push(e)}else do{if(t=this.guide[(e<<1)+1],n.pop(),i.pop(),!i.length)return s;if(e=i[i.length-1],t){if(e=this.followByte(t,e),e==a)return s;n.push(t),i.push(e)}}while(!t);for(;!this.hasValue(e);){var t=this.guide[e<<1];if(e=this.followByte(t,e),e==a)return s;n.push(t),i.push(e)}"words"==this.format?s.push([((1^n[0])<<6)+(n[1]>>1),((1^n[2])<<6)+(n[3]>>1)]):"probs"==this.format?s.push([((1^n[0])<<6)+(n[1]>>1),((1^n[2])<<6)+(n[3]>>1),((1^n[4])<<6)+(n[5]>>1)]):s.push(n.slice()),r=e}},f.prototype.findAll=function(e,t,s,i){i=i||0,s=s||0;for(var n,r,l,h,p,f,d,g=[],m=[["",0,0,0,o]];m.length;)if(n=m.pop(),r=n[4],d=n[3],f=n[2],l=n[1],n=n[0],l!=e.length){if(t&&e[l]in t&&(h=t[e[l]].charCodeAt(0),h in u&&(p=this.followByte(u[h],r),p!=a&&m.push([n+t[e[l]],l+1,f,d,p]))),i>f&&!d){m.push([n,l+1,f+1,d,r]);var y=c[e[l]];if(y)for(var b=0;b<y.length;b++)h=y.charCodeAt(b),h in u&&(p=this.followByte(u[h],r),p!=a&&m.push([n+y[b],l+1,f+1,d,p]));l<e.length-1&&(h=e.charCodeAt(l+1),h in u&&(p=this.followByte(u[h],r),p!=a&&(h=e.charCodeAt(l),h in u&&(p=this.followByte(u[h],p),p!=a&&m.push([n+e[l+1]+e[l],l+2,f+1,d,p])))))}if(h=e.charCodeAt(l),h in u&&(p=this.followByte(u[h],r),p!=a))for(m.push([n+e[l],l+1,f,d,p]);s>d&&!f&&l<e.length-1;){if(e[l]==e[l+1])m.push([n+e[l],l+2,f,d+1,p]),l++;else{if(!(l<e.length-2&&"-"==e[l+1]&&e[l]==e[l+2]))break;m.push([n+e[l],l+3,f,d+1,p]),l+=2}d++}}else{if("int"==this.format){this.hasValue(r)&&g.push([n,this.value(r)]);continue}if(("words"==this.format||"probs"==this.format)&&(r=this.followByte(1,r),r==a))continue;g.push([n,this.iterateAll(r),d,f])}return g},f}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.Morph=t(module.exports)):"function"==typeof define&&define.amd?define("Az.Morph",["Az","Az.DAWG"],t):(e.Az=e.Az||{})&&(e.Az.Morph=t(e.Az))}(this,function(e){"use strict";function t(e){if("freeze"in Object){var s=Object.getOwnPropertyNames(e);return s.forEach(function(s){var i=e[s];"object"==typeof i&&null!==i&&t(i)}),Object.freeze(e)}}var s,i,n,o,a,r,l=new Array(3),h=["","по","наи"],p={replacements:{"е":"ё"},stutter:1/0,typos:0},u=function(e){var t,s=e.split(" ");this.stat=s[0].split(",");for(var i=0;i<this.stat.length;i++)this[this.stat[i]]=!0,(t=o[this.stat[i]].parent)&&(this[t]=this.stat[i]);this.flex=s[1]?s[1].split(","):[];for(var i=0;i<this.flex.length;i++)this[this.flex[i]]=!0,(t=o[this.flex[i]].parent)&&(this[t]=this.flex[i]);"POST"in this&&(this.POS=this.POST)};u.prototype.toString=function(){return(this.stat.join(",")+" "+this.flex.join(",")).trim()},u.prototype.matches=function(e,t){if(!t){for(var s in e)if("[object Array]"===Object.prototype.toString.call(e[s])){if(!e[s].indexOf(this[s]))return!1}else if(e[s]!=this[s])return!1;return!0}e instanceof c&&(e=e.tag);for(var i=0;i<t.length;i++)if(e[t[i]]!=this[t[i]])return!1;return!0};var c=function(e,t,s,i,n){this.val=e,this.paradigmIdx=t,this.paradigm=a[t];var o=this.paradigm.length/3;this.formIdx=s,this.tag=r[this.paradigm[o+s]],this.stutterCnt=i,this.typosCnt=n};c.prototype.base=function(){if(this._base)return this._base;var e=this.paradigm.length/3;return this._base=this.val.substring(h[this.paradigm[(e<<1)+this.formIdx]].length,this.val.length-n[this.paradigm[this.formIdx]].length)},c.prototype.normalize=function(e){return this.inflect(e?{POS:this.tag.POS}:0)},c.prototype.inflect=function(e,t){var s=this.paradigm.length/3;if(!t&&"number"==typeof e)return[h[this.paradigm[(s<<1)+e]]+this.base()+n[this.paradigm[e]],r[this.paradigm[s+e]]];for(var i=0;s>i;i++)if(r[this.paradigm[s+i]].matches(e,t))return[h[this.paradigm[(s<<1)+i]]+this.base()+n[this.paradigm[i]],r[this.paradigm[s+i]]];return!1},c.prototype.matches=function(e,t){return this.tag.matches(e,t)},c.prototype.log=function(){var e=this.paradigm.length/3;console.group(this.val),console.log("Stutter?",this.stutterCnt,"Typos?",this.typosCnt),console.log(h[this.paradigm[(e<<1)+this.formIdx]]+"|"+this.base()+"|"+n[this.paradigm[this.formIdx]]),console.log(this.tag.ext.toString());var t=this.normalize();console.log("=> ",t[0]+" ("+t[1].ext.toString()+")");var t=this.normalize(!0);console.log("=> ",t[0]+" ("+t[1].ext.toString()+")"),console.groupCollapsed("Все формы: "+e);for(var s=0;e>s;s++){var i=this.inflect(s);console.log(i[0]+" ("+i[1].ext.toString()+")")}console.groupEnd(),console.groupEnd()};var f=function(e,t){t=t||p;for(var i in p)i in t||(t[i]=p[i]);var n;"auto"==t.typos?(n=s.findAll(e,t.replacements,t.stutter,0),!n.length&&e.length>4&&(n=s.findAll(e,t.replacements,t.stutter,1),!n.length&&e.length>9&&(n=s.findAll(e,t.replacements,t.stutter,2)))):n=s.findAll(e,t.replacements,t.stutter,t.typos);for(var o=[],a=0;a<n.length;a++)for(var r=0;r<n[a][1].length;r++){var e=new c(n[a][0],n[a][1][r][0],n[a][1][r][1],n[a][2],n[a][3]);o.push(e)}return o};return f.setDefaults=function(e){p=e},f.init=function(h,p){function c(){if(!--m){r=Array(d.length);for(var e=0;e<d.length;e++)r[e]=new u(d[e]),r[e].ext=new u(g[e]);r=t(r),p&&p(null,f)}}var d,g,m=0;m++,e.DAWG.load(h+"/words.dawg","words",function(e,t){s=t,c()});for(var y=0;3>y;y++)!function(t){m++,e.DAWG.load(h+"/prediction-suffixes-"+t+".dawg","probs",function(e,s){l[t]=s,c()})}(y);m++,e.DAWG.load(h+"/p_t_given_w.intdawg","int",function(e,t){i=t,c()}),m++,e.load(h+"/grammemes.json","json",function(e,t){o={};for(var s=0;s<t.length;s++)o[t[s][0]]=o[t[s][2]]={parent:t[s][1],internal:t[s][0],external:t[s][2],externalFull:t[s][3]};c()}),m++,e.load(h+"/gramtab-opencorpora-int.json","json",function(e,t){d=t,c()}),m++,e.load(h+"/gramtab-opencorpora-ext.json","json",function(e,t){g=t,c()}),m++,e.load(h+"/suffixes.json","json",function(e,t){n=t,c()}),m++,e.load(h+"/paradigms.array","arraybuffer",function(e,t){var s=new Uint16Array(t),i=s[0],n=1;a=[];for(var o=0;i>o;o++){var r=s[n++];a.push(s.subarray(n,n+r)),n+=r}c()})},f}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.Syntax=t(module.exports)):"function"==typeof define&&define.amd?define("Az.Syntax",["Az"],t):(e.Az=e.Az||{})&&(e.Az.Syntax=t(e.Az))}(this,function(e){"use strict";var t=function(){};return t}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.Tokens=t()):"function"==typeof define&&define.amd?define("Az.Tokens",["Az"],t):(e.Az=e.Az||{})&&(e.Az.Tokens=t())}(this,function(){"use strict";for(var e="ac|ad|ae|aero|af|ag|ai|al|am|ao|aq|ar|arpa|as|asia|at|au|aw|ax|az|ba|bb|be|bf|bg|bh|bi|biz|bj|bm|bo|br|bs|bt|bv|bw|by|bz|ca|cat|cc|cd|cf|cg|ch|ci|cl|cm|cn|co|com|coop|cr|cu|cv|cw|cx|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|es|et|eu|fi|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|info|int|io|iq|ir|is|it|je|jo|jobs|jp|kg|ki|km|kn|kp|kr|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mn|mo|mobi|mp|mq|mr|ms|mt|mu|museum|mv|mw|mx|my|na|name|nc|ne|net|nf|ng|nl|no|nr|nu|nz|om|org|pa|pe|pf|ph|pk|pl|pm|pn|post|pr|pro|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tr|travel|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|yt|امارات|հայ|বাংলা|бел|中国|中國|الجزائر|مصر|ею|გე|ελ|香港|भारत|بھارت|భారత్|ભારત|ਭਾਰਤ|ভারত|இந்தியா|ایران|ايران|عراق|الاردن|한국|қаз|ලංකා|இலங்கை|المغرب|мкд|мон|澳門|澳门|مليسيا|عمان|پاکستان|پاكستان|فلسطين|срб|рф|قطر|السعودية|السعودیة|السعودیۃ|السعوديه|سودان|新加坡|சிங்கப்பூர்|سورية|سوريا|ไทย|تونس|台灣|台湾|臺灣|укр|اليمن|xxx|zm|aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|academy|accenture|accountant|accountants|aco|active|actor|adac|ads|adult|aeg|aetna|afamilycompany|afl|africa|africamagic|agakhan|agency|aig|aigo|airbus|airforce|airtel|akdn|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|aol|apartments|app|apple|aquarelle|arab|aramco|archi|army|art|arte|asda|associates|athleta|attorney|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aws|axa|azure|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bbc|bbt|bbva|bcg|bcn|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bharti|bible|bid|bike|bing|bingo|bio|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bms|bmw|bnl|bnpparibas|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|bradesco|bridgestone|broadway|broker|brother|brussels|budapest|bugatti|build|builders|business|buy|buzz|bzh|cab|cafe|cal|call|calvinklein|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|catering|catholic|cba|cbn|cbre|cbs|ceb|center|ceo|cern|cfa|cfd|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|coach|codes|coffee|college|cologne|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|corsica|country|coupon|coupons|courses|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cuisinella|cymru|cyou|dabur|dad|dance|date|dating|datsun|day|dclk|dds|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dnp|docs|dodge|dog|doha|domains|dot|download|drive|dstv|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dwg|earth|eat|edeka|education|email|emerck|emerson|energy|engineer|engineering|enterprises|epost|epson|equipment|ericsson|erni|esq|estate|esurance|etisalat|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|flickr|flights|flir|florist|flowers|flsmidth|fly|foo|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|gal|gallery|gallo|gallup|game|games|gap|garden|gbiz|gdn|gea|gent|genting|george|ggee|gift|gifts|gives|giving|glade|glass|gle|global|globo|gmail|gmbh|gmo|gmx|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gotv|grainger|graphics|gratis|green|gripe|group|guardian|gucci|guge|guide|guitars|guru|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hkt|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|host|hosting|hot|hoteles|hotmail|house|how|hsbc|htc|hughes|hyatt|hyundai|ibm|icbc|ice|icu|ieee|ifm|iinet|ikano|imamat|imdb|immo|immobilien|industries|infiniti|ing|ink|institute|insurance|insure|intel|international|intuit|investments|ipiranga|irish|iselect|ismaili|ist|istanbul|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|jeep|jetzt|jewelry|jio|jlc|jll|jmp|jnj|joburg|jot|joy|jpmorgan|jprs|juegos|juniper|kaufen|kddi|kerryhotels|kerrylogistics|kerryproperties|kfh|kia|kim|kinder|kindle|kitchen|kiwi|koeln|komatsu|kosher|kpmg|kpn|krd|kred|kuokgroup|kyknet|kyoto|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|ltd|ltda|lundbeck|lupin|luxe|luxury|macys|madrid|maif|maison|makeup|man|management|mango|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mcd|mcdonalds|mckinsey|med|media|meet|melbourne|meme|memorial|men|menu|meo|metlife|miami|microsoft|mini|mint|mit|mitsubishi|mlb|mls|mma|mnet|mobily|moda|moe|moi|mom|monash|money|monster|montblanc|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|msd|mtn|mtpc|mtr|multichoice|mutual|mutuelle|mzansimagic|nab|nadex|nagoya|naspers|nationwide|natura|navy|nba|nec|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nfl|ngo|nhk|nico|nike|nikon|ninja|nissan|nissay|nokia|northwesternmutual|norton|now|nowruz|nowtv|nra|nrw|ntt|nyc|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|organic|orientexpress|origins|osaka|otsuka|ott|ovh|page|pamperedchef|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|payu|pccw|pet|pfizer|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|place|play|playstation|plumbing|plus|pnc|pohl|poker|politie|porn|pramerica|praxi|press|prime|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|pub|pwc|qpon|quebec|quest|qvc|racing|raid|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|rocher|rocks|rodeo|rogers|room|rsvp|ruhr|run|rwe|ryukyu|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sbi|sbs|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shopping|shouji|show|showtime|shriram|silk|sina|singles|site|ski|skin|sky|skype|sling|smart|smile|sncf|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|srl|srt|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|sucks|supersport|supplies|supply|support|surf|surgery|suzuki|swatch|swiftcover|swiss|sydney|symantec|systems|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tci|tdk|team|tech|technology|telecity|telefonica|temasek|tennis|teva|thd|theater|theatre|theguardian|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tjmaxx|tjx|tkmaxx|tmall|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|trade|trading|training|travelchannel|travelers|travelersinsurance|trust|trv|tube|tui|tunes|tushu|tvs|ubank|ubs|uconnect|unicom|university|uno|uol|ups|vacations|vana|vanguard|vegas|ventures|verisign|versicherung|vet|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vodka|volkswagen|volvo|vote|voting|voto|voyage|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|कॉम|セール|佛山|慈善|集团|在线|大众汽车|点看|คอม|八卦|موقع|一号店|公益|公司|香格里拉|网站|移动|我爱你|москва|католик|онлайн|сайт|联通|קום|时尚|微博|淡马锡|ファッション|орг|नेट|ストア|삼성|商标|商店|商城|дети|ポイント|新闻|工行|家電|كوم|中文网|中信|娱乐|谷歌|電訊盈科|购物|クラウド|通販|网店|संगठन|餐厅|网络|ком|诺基亚|食品|飞利浦|手表|手机|ارامكو|العليان|اتصالات|بازار|موبايلي|ابوظبي|كاثوليك|همراه|닷컴|政府|شبكة|بيتك|عرب|机构|组织机构|健康|рус|珠宝|大拿|みんな|グーグル|世界|書籍|网址|닷넷|コム|天主教|游戏|vermögensberater|vermögensberatung|企业|信息|嘉里大酒店|嘉里|广东|政务|xperia|xyz|yachts|yahoo|yamaxun|yandex|yodobashi|yoga|yokohama|you|youtube|yun|zappos|zara|zero|zip|zippo|zone|zuerich".split("|"),t={html:!1,wiki:!1,markdown:!1,hashtags:!0,mentions:!0,emails:!0,links:{protocols:!0,www:!0,tlds:{}}},s={nbsp:" ",quot:'"',gt:">",lt:"<",amp:"&"},i=0;i<e.length;i++)t.links.tlds[e[i]]=!0;var n=function(e,s){return this instanceof n?(this.tokens=[],this.config=s||t,this.append(e),this.index=-1,void 0):new n(e)};return n.prototype.append=function(e,t){t=t||this.config;for(var i=0;i<e.length;i++){var n=e.charAt(i),o=e.charCodeAt(i),a=!1,r=this.tokens.length-1,l=this.tokens[r];if(t.html&&";"==n)if(r>0&&"WORD"==l.type&&"&"==this.tokens[r-1].s){var h=l.s.toLowerCase();h in s&&(n=s[h],o=n.charCodeAt(0),r-=2,l=this.tokens[r],this.tokens.length=r+1)}else r>1&&("NUMBER"==l.type||"WORD"==l.type&&"x"==l.s[0])&&"#"==this.tokens[r-1].s&&"&"==this.tokens[r-2].s&&(o="x"==l.s[0]?parseInt(l.s.substr(1),16):parseInt(l.s,10),n=String.fromCharCode(o),r-=3,l=this.tokens[r],this.tokens.length=r+1);var p="OTHER",u=n.toLocaleLowerCase()!=n;o>=1024&&1279>=o&&(p="CYRIL"),(o>=65&&90>=o||o>=97&&122>=o||o>=192&&591>=o)&&(p="LATIN"),o>=48&&57>=o&&(p="DIGIT"),(32>=o||o>=128&&160>=o)&&(p="SPACE"),"‐-−‒–—―.…,:;?!¿¡()[]«»\"'’‘’“”/⁄".indexOf(n)>-1&&(p="PUNCT");var c=p,f=!1;"CYRIL"==p||"LATIN"==p?(c="WORD",f=p):"DIGIT"==p&&(c="NUMBER");var d=!l||"\n"==l.s[l.s.length-1];if(t.wiki&&(d&&":;*#~|".indexOf(n)>-1&&(c="MARKUP",f="NEWLINE"),"={[|]}".indexOf(n)>-1&&(c="MARKUP")),t.markdown&&(d&&"=-#>+-".indexOf(n)>-1&&(c="MARKUP",f="NEWLINE"),"[]*~_`\\".indexOf(n)>-1&&(c="MARKUP")),l)if(t.wiki&&"'"!=n&&"'"==l.s&&r>0&&"WORD"==this.tokens[r-1].type&&(this.tokens[r-1].s+=l.s,this.tokens[r-1].en=l.en,this.tokens[r-1].len+=l.len,r-=1,this.tokens.length=r+1,l=this.tokens[r]),t.links&&t.links.tlds&&("PUNCT"==p||"SPACE"==p)&&this.tokens.length>2&&"WORD"==this.tokens[r-2].type&&"."==this.tokens[r-1].s&&"WORD"==this.tokens[r].type&&this.tokens[r].s in t.links.tlds){for(;r>=2&&"WORD"==this.tokens[r-2].type&&("."==this.tokens[r-1].s||"@"==this.tokens[r-1].s||":"==this.tokens[r-1].s);)r-=2,l=this.tokens[r],l.s+=this.tokens[r+1].s+this.tokens[r+2].s,l.allUpper=l.allUpper&&this.tokens[r+1].allUpper&&this.tokens[r+2].allUpper;t.emails&&l.s.indexOf("@")>-1&&-1==l.s.indexOf(":")?l.type="EMAIL":(l.type="LINK","/"==n&&(a=!0)),this.tokens.length=r+1}else if("LINK"==l.type)"SPACE"!=p&&","!=n&&(a=!0);else if("EMAIL"==l.type)"CYRIL"!=p&&"LATIN"!=p&&"."!=n||(a=!0);else if("HASHTAG"==l.type||"MENTION"==l.type)("CYRIL"==p||"LATIN"==p||"DIGIT"==p||"_"==n||"@"==n&&-1==l.s.indexOf("@"))&&(a=!0);else if("TAG"!=l.type||!l.quote&&">"==l.s[l.s.length-1])if("CONTENT"==l.type)a=!0,l.quote?n==l.quote&&"\\"!=l.s[l.s.length-1]&&delete l.quote:'"'==n||"'"==n?l.quote=n:"<"==n&&(a=!1);else if("TAG"==l.type&&"<"!=n&&"script"==l.s.substr(1,6).toLowerCase())c="CONTENT",f="SCRIPT";else if("TAG"==l.type&&"<"!=n&&"style"==l.s.substr(1,5).toLowerCase())c="CONTENT",f="STYLE";else if(!t.html||"<"!=l.s||"LATIN"!=p&&"!"!=n&&"/"!=n)if("CONTENT"==l.type)a=!0;else if("MARKUP"!=l.type||"TEMPLATE"!=l.subType||"}"==l.s[l.s.length-1]&&"}"==l.s[l.s.length-2]){if("MARKUP"==l.type&&"LINK"==l.type&&")"!=l.s[l.s.length-1])a=!0;else if("MARKUP"==l.type&&"`"==l.s[0]&&"NEWLINE"==l.subType&&"LATIN"==p)a=!0;else if("CYRIL"==p||"LATIN"==p)"WORD"==l.type?(a=!0,l.subType=l.subType==p?l.subType:"MIXED"):"NUMBER"==l.type?(a=!0,l.subType=l.subType&&l.subType!=p?"MIXED":p):t.hashtags&&"#"==l.s?(a=!0,l.type="HASHTAG"):!t.mentions||"@"!=l.s||0!=r&&"SPACE"!=this.tokens[r-1].type?"LATIN"!=p||"'"!=l.s&&"’"!=l.s?"-"==l.s&&(a=!0,r>0&&"NUMBER"==this.tokens[r-1].type&&(l=this.tokens[r-1],l.s+=this.tokens[r].s,this.tokens.length-=1),l.type="WORD",l.subType=p):(a=!0,l.type="WORD",l.subType="LATIN"):(a=!0,l.type="MENTION");else if("DIGIT"==p)"WORD"==l.type?(a=!0,l.subType="MIXED"):"NUMBER"==l.type?a=!0:"+"==l.s||"-"==l.s?(a=!0,r>0&&"NUMBER"==this.tokens[r-1].type&&(l=this.tokens[r-1],l.s+=this.tokens[r].s,l.subType="RANGE",this.tokens.length-=1),l.type="NUMBER"):(","==l.s||"."==l.s)&&this.tokens.length>1&&"NUMBER"==this.tokens[r-1].type&&(a=!0,l=this.tokens[r-1],l.s+=this.tokens[r].s,this.tokens.length-=1);else if("SPACE"==p)"SPACE"==l.type&&(a=!0);else if("MARKUP"==l.type&&l.s[0]==n&&"=-~:*#`'>_".indexOf(n)>-1)a=!0;else if("."==n)t.links&&t.links.www&&"www"==l.s.toLocaleLowerCase()&&(a=!0,l.type="LINK");else if(t.wiki&&"'"==n)"'"==l.s?(a=!0,l.type="MARKUP"):c="PUNCT";else if("-"==n||"’"==n||"'"==n)"WORD"==l.type&&(a=!0);else if("/"==n)t.links&&t.links.protocols&&this.tokens.length>2&&"WORD"==this.tokens[r-2].type&&"LATIN"==this.tokens[r-2].subType&&":"==this.tokens[r-1].s&&"/"==this.tokens[r].s&&(a=!0,l=this.tokens[r-2],l.s+=this.tokens[r-1].s+this.tokens[r].s,l.allUpper=l.allUpper&&this.tokens[r-1].allUpper&&this.tokens[r].allUpper,l.type="LINK",this.tokens.length-=2);else if(t.html&&";"==n)r>0&&"WORD"==l.type&&"&"==this.tokens[r-1].s?(a=!0,l=this.tokens[r-1],l.s+=this.tokens[r].s,l.allUpper=l.allUpper&&this.tokens[r-1].allUpper,l.type="ENTITY",this.tokens.length-=1):r>1&&("WORD"==l.type||"NUMBER"==l.type)&&"#"==this.tokens[r-1].s&&"&"==this.tokens[r-2].s&&(a=!0,l=this.tokens[r-2],l.s+=this.tokens[r-1].s+this.tokens[r].s,l.allUpper=l.allUpper&&this.tokens[r-1].allUpper&&this.tokens[r].allUpper,l.type="ENTITY",this.tokens.length-=2);else if(t.markdown&&"["==n&&"!"==l.s)a=!0,l.type="MARKUP";else if(t.markdown&&"("==n&&"]"==l.s)c="MARKUP",f="LINK";else if(t.wiki&&"{"==n&&"{"==l.s)a=!0,l.type="MARKUP",l.subType="TEMPLATE";else if(t.wiki&&"["==n&&"["==l.s)a=!0;else if(t.wiki&&"]"==n&&"]"==l.s)a=!0;else if(t.wiki&&"|"==n&&!d){for(var g=-1,m=r-1;m>=0;m--){if("[["==this.tokens[m].s){g=m;break}if("|"==this.tokens[m].s||this.tokens[m].s.indexOf("\n")>-1)break}if(g>-1){a=!0;for(var m=r-1;m>=g;m--)l=this.tokens[m],l.s+=this.tokens[m+1].s,l.allUpper=l.allUpper&&this.tokens[m+1].allUpper;r=g,this.tokens.length=r+1,l.subType="LINK"}}}else a=!0;else a=!0,l.type="TAG","!"==n?l.subType="COMMENT":"/"==n&&(l.subType="CLOSING");else a=!0,l.quote?n==l.quote&&"\\"!=l.s[l.s.length-1]&&delete l.quote:'"'!=n&&"'"!=n||(l.quote=n);a?l.s+=n:(l={type:c,s:n,st:i,idx:this.tokens.length,firstUpper:u,allUpper:u},f&&(l.subType=f),this.tokens.push(l)),l.en=i,l.length=l.en-l.st+1,l.allUpper=l.allUpper&&u}return this},n.prototype.done=function(e,t){if(!e)return this.tokens;for(var s=[],i=0;i<this.tokens.length;i++)-1==e.indexOf(this.tokens[i].type)==t&&s.push(this.tokens[i]);return s},n.prototype.countTokens=function(e,t){if(!skipSpace&&!skipPunct)return this.tokens.length;for(var s=0,i=0;i<this.tokens.length;i++)-1==e.indexOf(this.tokens[i].type)==t&&s++;return s},n.prototype.nextToken=function(e,t,s){var i=this.index;for(i++;i<this.tokens.length&&t&&-1!=t.indexOf(this.tokens[i].type)==s;)i++;return i<this.tokens.length?(e&&(this.index=i),this.tokens[i]):null},n.prototype.punctAhead=function(){var e=this.nextToken(!1,["SPACE"],!0);return e&&"PUNCT"==e.type&&e},n.prototype.prevToken=function(e,t,s){var i=this.index;for(i--;i>=0&&t&&-1!=t.indexOf(this.tokens[i].type)==s;)i--;return i>=0?(e&&(this.index=i),this.tokens[i]):null},n.prototype.punctBehind=function(){var e=this.prevToken(!1,["SPACE"],!0);return e&&"PUNCT"==e.type&&e},n.prototype.hasTokensAhead=function(e,t){return null!=this.nextToken(!1,e,t)},n.prototype.hasTokensBehind=function(e,t){return null!=this.prevToken(!1,e,t)},n});
//# sourceMappingURL=az.min.js.map
