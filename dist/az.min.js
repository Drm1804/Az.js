!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Az",e):t.Az=e()}(this,function(){"use strict";if("undefined"!=typeof require&&"object"==typeof exports&&"undefined"!=typeof module)var t=require("fs");var e={load:function(e,n,r){if(t)return void t.readFile(e,{encoding:"json"==n?"utf8":null},function(t,e){if(t)return void r(t);if("json"==n)r(null,JSON.parse(e));else if("arraybuffer"==n)if(e.buffer)r(null,e.buffer);else{for(var i=new ArrayBuffer(e.length),s=new Uint8Array(i),o=0;o<e.length;++o)s[o]=e[o];r(null,i)}else r(new Error("Unknown responseType"))});var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=n,i.onload=function(t){i.response&&r&&r(null,i.response)},i.send(null)},extend:function(){for(var t={},e=0;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t}};return e}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.DAWG=e(module.exports)):"function"==typeof define&&define.amd?define("Az.DAWG",["Az"],e):(t.Az=t.Az||{})&&(t.Az.DAWG=e(t.Az))}(this,function(t){"use strict";function e(t){return t>>10<<((t&h)>>6)&a}function n(t){return t&(255|u)&a}function r(t){return 0!=(t&l&a)}function i(t){return t&~u&a}var s=0,o=-1,a=4294967295,l=256,h=512,u=1<<31,p={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,1027:129,8225:135,1046:198,8222:132,1047:199,1168:165,1048:200,1113:154,1049:201,1045:197,1050:202,1028:170,160:160,1040:192,1051:203,164:164,166:166,167:167,169:169,171:171,172:172,173:173,174:174,1053:205,176:176,177:177,1114:156,181:181,182:182,183:183,8221:148,187:187,1029:189,1056:208,1057:209,1058:210,8364:136,1112:188,1115:158,1059:211,1060:212,1030:178,1061:213,1062:214,1063:215,1116:157,1064:216,1065:217,1031:175,1066:218,1067:219,1068:220,1069:221,1070:222,1032:163,8226:149,1071:223,1072:224,8482:153,1073:225,8240:137,1118:162,1074:226,1110:179,8230:133,1075:227,1033:138,1076:228,1077:229,8211:150,1078:230,1119:159,1079:231,1042:194,1080:232,1034:140,1025:168,1081:233,1082:234,8212:151,1083:235,1169:180,1084:236,1052:204,1085:237,1035:142,1086:238,1087:239,1088:240,1089:241,1090:242,1036:141,1041:193,1091:243,1092:244,8224:134,1093:245,8470:185,1094:246,1054:206,1095:247,1096:248,8249:139,1097:249,1098:250,1044:196,1099:251,1111:191,1055:207,1100:252,1038:161,8220:147,1101:253,8250:155,1102:254,8216:145,1103:255,1043:195,1105:184,1039:143,1026:128,1106:144,8218:130,1107:131,8217:146,1108:186,1109:190},f={};for(var c in p)f[p[c]]=String.fromCharCode(c),delete f[0],delete f[1];var g={"й":"иёцыф","ц":"йфыву","у":"цывак","к":"увапе","е":"эикапрн","н":"епрог","г":"нролш","ш":"жголдщ","щ":"шлджз","з":"щджэх-","х":"зжэъ-","ъ":"ьхэ-ё","ф":"йцычяё","ы":"иойцувсчяф","в":"фцукамсчы","а":"оукепимсв","п":"кенртима","р":"енгоьтип","о":"ангшлбьтр","л":"гшщдюбьо","д":"шщзжюбл","ж":"шщзхэюд","э":"езхъжё","ё":"йфяъэ","я":"еёфыч","ч":"яфывс","с":"зчывам","м":"свапи","и":"йяемапрт","т":"дипроь","ь":"ътролб","б":"ьолдю","ю":"блдж",1:"ёйц",2:"йцу",3:"цук",4:"уке",5:"кен",6:"енг",7:"нгш",8:"гшщ",9:"шщз",0:"щзх-","-":"зхъ","=":"-хъ","\\":"ъэ",".":"южэ"},d=function(t,e,n){this.units=t,this.guide=e,this.format=n};return d.fromArrayBuffer=function(t,e){var n=new DataView(t),r=n.getUint32(0,!0),i=n.getUint32(4*r+4,!0);return new d(new Uint32Array(t,4,r),new Uint8Array(t,4*r+8,2*i),e)},d.load=function(e,n,r){t.load(e,"arraybuffer",function(t,e){r(t,t?null:d.fromArrayBuffer(e,n))})},d.prototype.followByte=function(t,r){var i=e(this.units[r]),s=(r^i^255&t)&a;return n(this.units[s])!=(255&t)?o:s},d.prototype.followString=function(t,e){e=e||s;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);if(!(r in p))return o;if(e=this.followByte(p[r],e),e==o)return o}return e},d.prototype.hasValue=function(t){return r(this.units[t])},d.prototype.value=function(t){var n=e(this.units[t]),r=(t^n)&a;return i(this.units[r])},d.prototype.find=function(t){var e=this.followString(t);return e==o?o:this.hasValue(e)?this.value(e):o},d.prototype.iterateAll=function(t){for(var e,n=[],r=[t],i=[],a=s;;){if(t=r[r.length-1],a!=s)if(e=this.guide[t<<1]){if(t=this.followByte(e,t),t==o)return n;i.push(e),r.push(t)}else do{if(e=this.guide[(t<<1)+1],i.pop(),r.pop(),!r.length)return n;if(t=r[r.length-1],e){if(t=this.followByte(e,t),t==o)return n;i.push(e),r.push(t)}}while(!e);for(;!this.hasValue(t);){var e=this.guide[t<<1];if(t=this.followByte(e,t),t==o)return n;i.push(e),r.push(t)}"words"==this.format?n.push([((1^i[0])<<6)+(i[1]>>1),((1^i[2])<<6)+(i[3]>>1)]):"probs"==this.format?n.push([((1^i[0])<<6)+(i[1]>>1),((1^i[2])<<6)+(i[3]>>1),((1^i[4])<<6)+(i[5]>>1)]):n.push(i.slice()),a=t}},d.prototype.findAll=function(t,e,n,r){r=r||0,n=n||0;for(var i,a,l,h,u,c,d,m=[],y=[["",0,0,0,s]];y.length;)if(i=y.pop(),a=i[4],d=i[3],c=i[2],l=i[1],i=i[0],l!=t.length){if(e&&t[l]in e&&(h=e[t[l]].charCodeAt(0),h in p&&(u=this.followByte(p[h],a),u!=o&&y.push([i+e[t[l]],l+1,c,d,u]))),c<r&&d<=n){y.push([i,l+1,c+1,d,a]);var b=this.guide[a<<1];do u=this.followByte(b,a),u!=o&&b in f&&y.push([i+f[b],l,c+1,d,u]),b=this.guide[(u<<1)+1];while(u!=o);var v=g[t[l]];if(v)for(var w=0;w<v.length;w++)h=v.charCodeAt(w),h in p&&(u=this.followByte(p[h],a),u!=o&&y.push([i+v[w],l+1,c+1,d,u]));l<t.length-1&&(h=t.charCodeAt(l+1),h in p&&(u=this.followByte(p[h],a),u!=o&&(h=t.charCodeAt(l),h in p&&(u=this.followByte(p[h],u),u!=o&&y.push([i+t[l+1]+t[l],l+2,c+1,d,u])))))}if(h=t.charCodeAt(l),h in p&&(u=this.followByte(p[h],a),u!=o))for(y.push([i+t[l],l+1,c,d,u]);d<n&&c<=r&&l<t.length-1;){if(t[l]==t[l+1])y.push([i+t[l],l+2,c,d+1,u]),l++;else{if(!(l<t.length-2&&"-"==t[l+1]&&t[l]==t[l+2]))break;y.push([i+t[l],l+3,c,d+1,u]),l+=2}d++}}else{if(c<r&&d<=n){var b=this.guide[a<<1];do u=this.followByte(b,a),u!=o&&b in f&&y.push([i+f[b],l,c+1,d,u]),b=this.guide[(u<<1)+1];while(u!=o)}if("int"==this.format){this.hasValue(a)&&m.push([i,this.value(a)]);continue}if(("words"==this.format||"probs"==this.format)&&(a=this.followByte(1,a),a==o))continue;m.push([i,this.iterateAll(a),d,c])}return m},d}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.Morph=e(module.exports)):"function"==typeof define&&define.amd?define("Az.Morph",["Az","Az.DAWG"],e):(t.Az=t.Az||{})&&(t.Az.Morph=e(t.Az))}(this,function(t){"use strict";function e(t){if("freeze"in Object){var n=Object.getOwnPropertyNames(t);return n.forEach(function(n){var r=t[n];"object"==typeof r&&null!==r&&e(r)}),Object.freeze(t)}}function n(t,n){var r=new k(t);return r.ext=new k(n),e(r)}function r(t,e,n){var r;if("auto"==n.typos){r=t.findAll(e,n.replacements,n.stutter,0);for(var i=0;i<b.length&&!r.length&&e.length>b[i];i++)r=t.findAll(e,n.replacements,n.stutter,i+1)}else r=t.findAll(e,n.replacements,n.stutter,n.typos);return r}function i(t,e){return Math.pow(.3,e)*Math.pow(.6,Math.min(t,1))}var s,o,a,l,h,u,p,f=new Array(3),c=["","по","наи"],g={ignoreCase:!1,replacements:{"е":"ё"},stutter:1/0,typos:0,parsers:["Dictionary?","AbbrName?","AbbrPatronymic","IntNumber","RealNumber","Punctuation","RomanNumber?","Latin","HyphenParticle","HyphenAdverb","HyphenWords","PrefixKnown","PrefixUnknown?","SuffixKnown?","Abbr"],forceParse:!1,normalizeScore:!0},d="АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЭЮЯ",m=["-то","-ка","-таки","-де","-тко","-тка","-с","-ста"],y=["авиа","авто","аква","анти","анти-","антропо","архи","арт","арт-","астро","аудио","аэро","без","бес","био","вело","взаимо","вне","внутри","видео","вице-","вперед","впереди","гекто","гелио","гео","гетеро","гига","гигро","гипер","гипо","гомо","дву","двух","де","дез","дека","деци","дис","до","евро","за","зоо","интер","инфра","квази","квази-","кило","кино","контр","контр-","космо","космо-","крипто","лейб-","лже","лже-","макро","макси","макси-","мало","меж","медиа","медиа-","мега","мета","мета-","метео","метро","микро","милли","мини","мини-","моно","мото","много","мульти","нано","нарко","не","небез","недо","нейро","нео","низко","обер-","обще","одно","около","орто","палео","пан","пара","пента","пере","пиро","поли","полу","после","пост","пост-","порно","пра","пра-","пред","пресс-","противо","противо-","прото","псевдо","псевдо-","радио","разно","ре","ретро","ретро-","само","санти","сверх","сверх-","спец","суб","супер","супер-","супра","теле","тетра","топ-","транс","транс-","ультра","унтер-","штаб-","экзо","эко","эндо","эконом-","экс","экс-","экстра","экстра-","электро","энерго","этно"],b=[4,9],v=[],w=!1,k=function(t){var e,n=t.split(" ");this.stat=n[0].split(","),this.flex=n[1]?n[1].split(","):[];for(var r=0;r<2;r++)for(var i=this[["stat","flex"][r]],s=0;s<i.length;s++){var o=i[s];for(this[o]=!0;l[o]&&(e=l[o].parent);)this[e]=o,o=e}"POST"in this&&(this.POS=this.POST)};k.prototype.toString=function(){return(this.stat.join(",")+" "+this.flex.join(",")).trim()},k.prototype.matches=function(t,e,n){if(void 0===n&&"boolean"==typeof e&&(n=e,e=!1),!e){if("[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<t.length;r++)if(!this[t[r]])return!1;return!0}for(var i in t)if("[object Array]"===Object.prototype.toString.call(t[i])){for(var s=!1,r=0;r<t[i].length;r++)if(t[i][r]==this[i]){s=!0;break}if(!s)return!1}else if(t[i]!=this[i]&&(t[i]!==!1||void 0!==this[i]))return!1;return!0}!(t instanceof k)&&"tag"in t&&(t=t.tag);for(var r=0;r<e.length;r++)if(t[e[r]]!=this[e[r]]&&(!n||e[r]in t&&e[r]in this))return!1;return!0},k.prototype.isProductive=function(){return!(this.NUMR||this.NPRO||this.PRED||this.PREP||this.CONJ||this.PRCL||this.INTJ||this.Apro||this.NUMB||this.ROMN||this.LATN||this.PNCT||this.UNKN)},k.prototype.isCapitalized=function(){return this.Name||this.Surn||this.Patr||this.Geox||this.Init};var N=function(e,n){if(!w)throw new Error("Please call Az.Morph.init() before using this module.");n=n?t.extend(g,n):g;for(var r=[],s=!1,a=0;a<n.parsers.length;a++){var l=n.parsers[a],h="?"!=l[l.length-1];if(l=h?l:l.slice(0,-1),l in N.Parsers){for(var u=N.Parsers[l](e,n),f=0;f<u.length;f++)u[f].parser=l,u[f].stutterCnt||u[f].typosCnt||(s=!0);if(r=r.concat(u),s&&h)break}else console.warn('Parser "'+l+'" is not found. Skipping')}!r.length&&n.forceParse&&r.push(new A(e.toLocaleLowerCase(),p));for(var c=0,a=0;a<r.length;a++)if("Dictionary"==r[a].parser){var d=o.findAll(r[a]+":"+r[a].tag);d&&d[0]&&(r[a].score=d[0][1]/1e6*i(r[a].stutterCnt,r[a].typosCnt),c+=r[a].score)}if(n.normalizeScore){if(c>0)for(var a=0;a<r.length;a++)"Dictionary"==r[a].parser&&(r[a].score/=c);c=0;for(var a=0;a<r.length;a++)"Dictionary"!=r[a].parser&&(c+=r[a].score);if(c>0)for(var a=0;a<r.length;a++)"Dictionary"!=r[a].parser&&(r[a].score/=c)}return r.sort(function(t,e){return e.score-t.score}),r};N.Parsers={};var A=function(t,e,n,r,i){this.word=t,this.tag=e,this.stutterCnt=r||0,this.typosCnt=i||0,this.score=n||0};A.prototype.normalize=function(t){return this.inflect(t?{POS:this.tag.POS}:0)},A.prototype.inflect=function(t,e){return this},A.prototype.pluralize=function(t){return this.tag.NOUN||this.tag.ADJF||this.tag.PRTF?("number"==typeof t&&(t%=100,t=t%10==0||t%10>4||t>4&&t<21?"many":t%10==1?"one":"few"),!this.tag.NOUN||this.tag.nomn||this.tag.accs?"one"==t?this.inflect(["sing",this.tag.nomn?"nomn":"accs"]):this.tag.NOUN&&"few"==t?this.inflect(["sing","gent"]):(this.tag.ADJF||this.tag.PRTF)&&this.tag.femn&&"few"==t?this.inflect(["plur","nomn"]):this.inflect(["plur","gent"]):this.inflect(["one"==t?"sing":"plur",this.tag.CAse])):this},A.prototype.matches=function(t,e,n){return this.tag.matches(t,e,n)},A.prototype.toString=function(){return this.word},A.prototype.log=function(){console.group(this.toString()),console.log("Stutter?",this.stutterCnt,"Typos?",this.typosCnt),console.log(this.tag.ext.toString()),console.groupEnd()};var P=function(t,e,n,r,s,o,a){this.word=t,this.paradigmIdx=e,this.paradigm=h[e],this.formIdx=n,this.formCnt=this.paradigm.length/3,this.tag=u[this.paradigm[this.formCnt+n]],this.stutterCnt=r||0,this.typosCnt=s||0,this.score=i(this.stutterCnt,this.typosCnt),this.prefix=o||"",this.suffix=a||""};P.prototype=Object.create(A.prototype),P.prototype.constructor=P,P.prototype.base=function(){return this._base?this._base:this._base=this.word.substring(c[this.paradigm[(this.formCnt<<1)+this.formIdx]].length,this.word.length-a[this.paradigm[this.formIdx]].length)},P.prototype.inflect=function(t,e){if(!e&&"number"==typeof t)return new P(c[this.paradigm[(this.formCnt<<1)+t]]+this.base()+a[this.paradigm[t]],this.paradigmIdx,t,0,0,this.prefix,this.suffix);for(var n=0;n<this.formCnt;n++)if(u[this.paradigm[this.formCnt+n]].matches(t,e))return new P(c[this.paradigm[(this.formCnt<<1)+n]]+this.base()+a[this.paradigm[n]],this.paradigmIdx,n,0,0,this.prefix,this.suffix);return!1},P.prototype.log=function(){console.group(this.toString()),console.log("Stutter?",this.stutterCnt,"Typos?",this.typosCnt),console.log(c[this.paradigm[(this.formCnt<<1)+this.formIdx]]+"|"+this.base()+"|"+a[this.paradigm[this.formIdx]]),console.log(this.tag.ext.toString());var t=this.normalize();console.log("=> ",t+" ("+t.tag.ext.toString()+")"),t=this.normalize(!0),console.log("=> ",t+" ("+t.tag.ext.toString()+")"),console.groupCollapsed("Все формы: "+this.formCnt);for(var e=0;e<this.formCnt;e++){var n=this.inflect(e);console.log(n+" ("+n.tag.ext.toString()+")")}console.groupEnd(),console.groupEnd()},P.prototype.toString=function(){if(this.prefix){var t=c[this.paradigm[(this.formCnt<<1)+this.formIdx]];return t+this.prefix+this.word.substr(t.length)+this.suffix}return this.word+this.suffix};var x=function(t,e){this.left=t,this.right=e,this.tag=e.tag,this.score=t.score*e.score*.8,this.stutterCnt=t.stutterCnt+e.stutterCnt,this.typosCnt=t.typosCnt+e.typosCnt,"formCnt"in e&&(this.formCnt=e.formCnt)};return x.prototype=Object.create(A.prototype),x.prototype.constructor=x,x.prototype.inflect=function(t,e){var n,r,r=this.right.inflect(t,e);return n=e||"number"!=typeof t?this.left.inflect(t,e):this.left.inflect(r.tag,["POST","NMbr","CAse","PErs","TEns"]),!(!n||!r)&&new x(n,r)},x.prototype.toString=function(){return this.left.word+"-"+this.right.word},v.push(function(){N.Parsers.Dictionary=function(t,e){var n=!e.ignoreCase&&t.length&&t[0].toLocaleLowerCase()!=t[0]&&t.substr(1).toLocaleUpperCase()!=t.substr(1);t=t.toLocaleLowerCase();for(var i=r(s,t,e),o=[],a=0;a<i.length;a++)for(var l=0;l<i[a][1].length;l++){var h=new P(i[a][0],i[a][1][l][0],i[a][1][l][1],i[a][2],i[a][3]);(e.ignoreCase||!h.tag.isCapitalized()||n)&&o.push(h)}return o};for(var t=[],e=0;e<=2;e++)for(var i=0;i<=5;i++)for(var o=0;o<=1;o++)t.push(n("NOUN,inan,"+["masc","femn","neut"][e]+",Fixd,Abbr "+["sing","plur"][o]+","+["nomn","gent","datv","accs","ablt","loct"][i],"СУЩ,неод,"+["мр","жр","ср"][e]+",0,аббр "+["ед","мн"][o]+","+["им","рд","дт","вн","тв","пр"][i]));N.Parsers.Abbr=function(e,n){if(e.length<2)return[];if(e.indexOf("-")>-1)return[];if(d.indexOf(e[0])>-1&&d.indexOf(e[e.length-1])>-1){for(var r=0,i=0;i<e.length;i++)d.indexOf(e[i])>-1&&r++;if(r<=5){for(var s=[],i=0;i<t.length;i++){var o=new A(e,t[i],.5);s.push(o)}return s}}if(!n.ignoreCase||e.length>5)return[];e=e.toLocaleUpperCase();for(var i=0;i<e.length;i++)if(d.indexOf(e[i])==-1)return[];for(var s=[],i=0;i<t.length;i++){var o=new A(e,t[i],.2);s.push(o)}return s};var a=function(t,e){for(var r=[],i=0;i<=1;i++)for(var s=0;s<=5;s++)r.push(n("NOUN,anim,"+["masc","femn"][i]+",Sgtm,Name,Fixd,Abbr,Init sing,"+["nomn","gent","datv","accs","ablt","loct"][s],"СУЩ,од,"+["мр","жр"][i]+",sg,имя,0,аббр,иниц ед,"+["им","рд","дт","вн","тв","пр"][s]));return function(t,n){if(1!=t.length)return[];if(n.ignoreCase&&(t=t.toLocaleUpperCase()),d.indexOf(t)==-1)return[];for(var i=[],s=0;s<r.length;s++){var o=new A(t,r[s],e);i.push(o)}return i}};N.Parsers.AbbrName=a(!1,.1),N.Parsers.AbbrPatronymic=a(!0,.1);var h=function(t,e,n){return function(n,r){return r.ignoreCase&&(n=n.toLocaleUpperCase()),n.length&&n.match(t)?[new A(n,e)]:[]}};l.NUMB=l["ЧИСЛО"]=l.ROMN=l["РИМ"]=l.LATN=l["ЛАТ"]=l.PNCT=l["ЗПР"]=l.UNKN=l["НЕИЗВ"]={parent:"POST"},N.Parsers.IntNumber=h(/^[−-]?[0-9]+$/,n("NUMB,intg","ЧИСЛО,цел"),.9),N.Parsers.RealNumber=h(/^[−-]?([0-9]*[.,][0-9]+)$/,n("NUMB,real","ЧИСЛО,вещ"),.9),N.Parsers.Punctuation=h(/^[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]+$/,n("PNCT","ЗПР"),.9),N.Parsers.RomanNumber=h(/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,n("ROMN","РИМ"),.9),N.Parsers.Latin=h(/[A-Za-z\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u024f]$/,n("LATN","ЛАТ"),.9),N.Parsers.HyphenParticle=function(t,e){t=t.toLocaleLowerCase();for(var n=[],i=0;i<m.length;i++)if(t.substr(t.length-m[i].length)==m[i])for(var o=t.slice(0,-m[i].length),a=r(s,o,e),l=0;l<a.length;l++)for(var h=0;h<a[l][1].length;h++){var u=new P(a[l][0],a[l][1][h][0],a[l][1][h][1],a[l][2],a[l][3],"",m[i]);u.score*=.9,n.push(u)}return n};var u=n("ADVB","Н");N.Parsers.HyphenAdverb=function(t,e){if(t=t.toLocaleLowerCase(),t.length<5||"по-"!=t.substr(0,3))return[];for(var n=r(s,t.substr(3),e),i=[],o={},a=0;a<n.length;a++)if(!o[n[a][0]])for(var l=0;l<n[a][1].length;l++){var h=new P(n[a][0],n[a][1][l][0],n[a][1][l][1],n[a][2],n[a][3]);if(h.matches(["ADJF","sing","datv"])){o[n[a][0]]=!0,h=new A("по-"+n[a][0],u,.9*h.score,n[a][2],n[a][3]),i.push(h);break}}return i},N.Parsers.HyphenWords=function(t,e){t=t.toLocaleLowerCase();for(var n=0;n<y.length;n++)if("-"==y[n][y[n].length-1]&&t.substr(0,y[n].length)==y[n])return[];var r=[],i=t.split("-");if(2!=i.length||!i[0].length||!i[1].length){if(i.length>2)for(var s=i[i.length-1],o=N.Parsers.Dictionary(s,e),a=0;a<o.length;a++)o[a]instanceof P&&(o[a].score*=.2,o[a].prefix=t.substr(0,t.length-s.length-1)+"-",r.push(o[a]));return r}for(var l=N.Parsers.Dictionary(i[0],e),o=N.Parsers.Dictionary(i[1],e),n=0;n<l.length;n++)if(!l[n].tag.Abbr)for(var a=0;a<o.length;a++)l[n].matches(o[a],["POST","NMbr","CAse","PErs","TEns"])&&(l[n].stutterCnt+o[a].stutterCnt>e.stutter||l[n].typosCnt+o[a].typosCnt>e.typos||r.push(new x(l[n],o[a])));for(var a=0;a<o.length;a++)o[a]instanceof P&&(o[a].score*=.3,o[a].prefix=i[0]+"-",r.push(o[a]));return r},N.Parsers.PrefixKnown=function(t,e){var n=!e.ignoreCase&&t.length&&t[0].toLocaleLowerCase()!=t[0]&&t.substr(1).toLocaleUpperCase()!=t.substr(1);t=t.toLocaleLowerCase();for(var r=[],i=0;i<y.length;i++)if(!(t.length-y[i].length<3)&&t.substr(0,y[i].length)==y[i])for(var s=t.substr(y[i].length),o=N.Parsers.Dictionary(s,e),a=0;a<o.length;a++)o[a].tag.isProductive()&&(e.ignoreCase||!o[a].tag.isCapitalized()||n)&&(o[a].score*=.7,o[a].prefix=y[i],r.push(o[a]));return r},N.Parsers.PrefixUnknown=function(t,e){var n=!e.ignoreCase&&t.length&&t[0].toLocaleLowerCase()!=t[0]&&t.substr(1).toLocaleUpperCase()!=t.substr(1);t=t.toLocaleLowerCase();for(var r=[],i=1;i<=5&&!(t.length-i<3);i++)for(var s=t.substr(i),o=N.Parsers.Dictionary(s,e),a=0;a<o.length;a++)o[a].tag.isProductive()&&(e.ignoreCase||!o[a].tag.isCapitalized()||n)&&(o[a].score*=.3,o[a].prefix=t.substr(0,i),r.push(o[a]));return r},N.Parsers.SuffixKnown=function(t,e){if(t.length<4)return[];var n=!e.ignoreCase&&t.length&&t[0].toLocaleLowerCase()!=t[0]&&t.substr(1).toLocaleUpperCase()!=t.substr(1);t=t.toLocaleLowerCase();for(var r=[],i=1,s=[0,.2,.3,.4,.5,.6],o={},a=0;a<c.length;a++)if(!c[a].length||t.substr(0,c[a].length)==c[a])for(var l=t.substr(c[a].length),h=5;h>=i;h--)if(!(h>=l.length)){var u=l.substr(0,l.length-h),p=l.substr(l.length-h),g=f[a].findAll(p,e.replacements,0,0);if(g){for(var d=[],m=1,y=0;y<g.length;y++)for(var b=g[y][0],v=g[y][1],w=0;w<v.length;w++){var k=new P(c[a]+u+b,v[w][1],v[w][2]);if(k.tag.isProductive()&&(e.ignoreCase||!k.tag.isCapitalized()||n)){var N=k.toString()+":"+v[w][1]+":"+v[w][2];N in o||(m=Math.max(m,v[w][0]),k.score=v[w][0]*s[h],d.push(k),o[N]=!0)}}if(d.length>0){for(var y=0;y<d.length;y++)d[y].score/=m;r=r.concat(d),i=Math.max(h-1,1)}}}return r},p=n("UNKN","НЕИЗВ")}),N.setDefaults=function(t){g=t},N.init=function(n,r){function i(){if(!--g){u=Array(p.length);for(var t=0;t<p.length;t++)u[t]=new k(p[t]),u[t].ext=new k(c[t]);u=e(u);for(var t=0;t<v.length;t++)v[t]();w=!0,r&&r(null,N)}}var p,c,g=0;r||"function"!=typeof n||(r=n,n="string"==typeof __dirname?__dirname+"/../dicts":"dicts"),g++,t.DAWG.load(n+"/words.dawg","words",function(t,e){return t?void r(t):(s=e,void i())});for(var d=0;d<3;d++)!function(e){g++,t.DAWG.load(n+"/prediction-suffixes-"+e+".dawg","probs",function(t,n){return t?void r(t):(f[e]=n,void i())})}(d);g++,t.DAWG.load(n+"/p_t_given_w.intdawg","int",function(t,e){return t?void r(t):(o=e,void i())}),g++,t.load(n+"/grammemes.json","json",function(t,e){if(t)return void r(t);l={};for(var n=0;n<e.length;n++)l[e[n][0]]=l[e[n][2]]={parent:e[n][1],internal:e[n][0],external:e[n][2],externalFull:e[n][3]};N.grammemes=l,i()}),g++,t.load(n+"/gramtab-opencorpora-int.json","json",function(t,e){return t?void r(t):(p=e,void i())}),g++,t.load(n+"/gramtab-opencorpora-ext.json","json",function(t,e){return t?void r(t):(c=e,void i())}),g++,t.load(n+"/suffixes.json","json",function(t,e){return t?void r(t):(a=e,void i())}),g++,t.load(n+"/paradigms.array","arraybuffer",function(t,e){if(t)return void r(t);var n=new Uint16Array(e),s=n[0],o=1;h=[];for(var a=0;a<s;a++){var l=n[o++];h.push(n.subarray(o,o+l)),o+=l}i()})},N.Tag=k,N}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.Syntax=e(module.exports)):"function"==typeof define&&define.amd?define("Az.Syntax",["Az"],e):(t.Az=t.Az||{})&&(t.Az.Syntax=e(t.Az))}(this,function(t){"use strict";var e,n,r=function(t,e,n,r,i,s){this.st=t,this.en=e,this.tokens=n,this.parses=r,this.tag=i,this.score=s};r.fromParse=function(t,e,n){return new r(t,t,[e],[n],n.tag,n.score)},r.fromGroups=function(){for(var t=arguments[0].clone(),e=1;e<arguments.length;e++)t.append(arguments[e]);return t},r.prototype.clone=function(){return new r(this.st,this.en,this.tokens.slice(0),this.parses.slice(0),this.tag,this.score)},r.prototype.prepend=function(t,e){t instanceof r?this.prepend(t.tokens,t.parses):t instanceof Array?(this.st-=t.length,this.tokens=t.concat(this.tokens),this.parses=e.concat(this.parses)):(this.st--,this.tokens.unshift(t),this.parses.unshift(e))},r.prototype.shift=function(){this.st++,this.tokens.shift(),this.parses.shift()},r.prototype.append=function(t,e){t instanceof r?this.append(t.tokens,t.parses):t instanceof Array?(this.en+=t.length,this.tokens=this.tokens.concat(t),this.parses=this.parses.concat(e)):(this.en++,this.tokens.push(t),this.parses.push(e))},r.prototype.pop=function(){this.en--,this.tokens.pop(),this.parses.pop()};var i=function(){};return i.parse=function(e,i){function s(t){if(t.before||t.after||0==t.st||t.en==d.length-1)return t;var n=e[t.st-1],r=e[t.en+1];return("«"==n&&"»"==r||"["==n&&"]"==r)&&(t.prepend(n,d[t.st-1][0]),t.append(r,d[t.en+1][0]),t.before=n,t.after=r),t}function o(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r.tag.Name){var i=r.clone();i.type="NP",i.dets=[],i.noun=r,i.name=r;for(var o=0;o<t.length;o++)if((t[o].tag.Surn||t[o].tag.Patr||t[o].tag.Abbr)&&t[o].st==i.en+1){if(!i.tag.matches(t[o],["NMbr","CAse","GNdr"],!0))continue;i.append(t[o]),t[o].tag.Surn?i.surname=t[o]:i.patronymic=t[o];break}if(i.patronymic)for(var o=0;o<t.length;o++)if(t[o].tag.Surn&&t[o].st==i.patronymic.en+1){if(!i.tag.matches(t[o],["NMbr","CAse","GNdr"],!0))continue;i.append(t[o]),i.surname=t[o];break}if(!i.surname)for(var o=0;o<t.length;o++)if(t[o].tag.Surn&&t[o].en==i.st-1){if(!i.tag.matches(t[o],["NMbr","CAse","GNdr"],!0))continue;i.append(t[o]),i.surname=t[o];break}e.push(s(i))}else if(r.tag.Surn){var i=r.clone();i.type="NP",i.dets=[],i.noun=r,i.surname=r,e.push(s(i))}}return e}function a(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i.clone(),a=!1;o.type="NP",o.dets=[],o.noun=i;for(var l=1;l<3&&i.st-l>=0;l++){for(var h=!1,u=0;u<d[i.st-l].length;u++){var p=d[i.st-l][u];if(p.matches({POS:["ADJF","PRTF"]})&&p.matches(i.tag,["NMbr","GNdr","CAse","ANim"],!0)){h=!0,a=!1,o.prepend(e[i.st-l],p),o.dets.unshift(p);break}if(2==l&&"и"==e[i.st-l].toLowerCase()){h=!0,a=!0,o.prepend(e[i.st-l],p);break}}if(!h)break}if(a&&o.shift(),i.st-l>=0)for(var u=0;u<d[i.st-l].length;u++){var f=d[i.st-l][u];if(f.matches({POS:["NUMB","NUMR"]})){o.prepend(e[i.st-l],f),o.num=f;break}}n.push(s(o))}return n}function l(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(0!=i.st&&i.tag.matches({CAse:"gent"}))for(var o=0;o<t.length;o++){var a=t[o];if(a.en==i.st-1){var l=r.fromGroups(a,i);l.type="NP",l.np=a,l.dep=i,e.push(s(l))}}}return e}function h(t){for(var r=[],i=0;i<t.length;i++){var o=t[i];if(0!=o.st){var a=e[o.st-1].toLowerCase();if(a in n){var l=o.clone();l.type="PP",l.np=o;for(var h=0;h<d[o.st-1].length;h++){var u=d[o.st-1][h];if(u.tag.PREP&&o.tag.matches({CAse:n[a]})){l.prepend(e[o.st-1],u),l.prep=u,r.push(s(l));break}}}}}return r}function u(t,e){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(0!=o.st)for(var a=0;a<t.length;a++){var l=t[a];if(l.en==o.st-1){var h=r.fromGroups(l,o);h.type=l.type,h.np=l,h.dep=o,n.push(s(h))}}}return n}function p(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(!(i.en+1>=d.length-1))for(var o=0;o<d[i.en+1].length;o++){var a=d[i.en+1][o];if(a.tag.matches({POS:["NOUN","NPRO"]})&&i.tag.matches(a.tag,["NMbr","GNdr","CAse","ANim"],!0)){var l=i.clone();l.type="NP",l.append(e[i.en+1],a),l.tag=a.tag,l.noun=a,l.dets=[i],n.push(s(l))}}}return n}function f(t,e){for(var n=[],r={},i={},o=0;o<e.length;o++)e[o].st in i||(i[e[o].st]=[]),i[e[o].st].push(e[o]),e[o].en in r||(r[e[o].en]=[]),r[e[o].en].push(e[o]);for(var o=0;o<t.length;o++){var a=t[o],l=t[o].clone();l.type="VP",l.verb=a,l.pp=[];for(var h=a.st-1;r[h];){for(var u=!1,p=0;p<r[h].length;p++){var f=r[h][p];if(f.tag.ADVB){if(l.advb)continue}else if(f.tag.PRCL){if(["не","якобы"].indexOf(f.tokens[0].toLowerCase())==-1)continue}else{if(f.tag.INFN)continue;if("NP"==f.type)if(f.tag.nomn&&a.tag.indc){if(l.object)continue;if(a.tag.PErs&&"3per"!=a.tag.PErs){if(f.tag.PErs!=a.tag.PErs)continue}else if(f.tag.PErs&&"3per"!=f.tag.PErs)continue;if(!f.tag.matches(a.tag,["GNdr","NMbr"],!0))continue}else if(f.tag.accs&&a.tag.tran){if(l.subject)continue}else{if(!(f.tag.gent||f.tag.datv||f.tag.ablt))continue;if(l[f.tag.CAse])continue}}(!u||u.st>f.st)&&(u=f)}if(!u)break;l.prepend(u),u.tag.ADVB?l.advb=u:u.tag.PRCL?"не"==u.tokens[0].toLowerCase()&&(l.negate=!l.negate):"NP"==u.type?u.tag.nomn?l.object=u:u.tag.accs?l.subject=u:l[u.tag.CAse]=u:l.pp.push(u),h=u.st-1}for(var c=a.en+1;i[c];){for(var u=!1,p=0;p<i[c].length;p++){var f=i[c][p];if(f.tag.ADVB){if(l.advb)continue}else{if(f.tag.PRCL)continue;if(f.tag.INFN){if(l.modal)continue}else if("NP"==f.type)if(f.tag.nomn&&a.tag.indc){if(l.object)continue;if(a.tag.PErs&&"3per"!=a.tag.PErs){if(f.tag.PErs!=a.tag.PErs)continue}else if(f.tag.PErs&&"3per"!=f.tag.PErs)continue;if(!f.tag.matches(a.tag,["GNdr","NMbr"],!0))continue}else if(f.tag.accs&&a.tag.tran){if(l.subject)continue}else{if(!(f.tag.gent||f.tag.datv||f.tag.ablt))continue;if(l[f.tag.CAse])continue}}(!u||u.en<f.en)&&(u=f)}if(!u)break;l.append(u),u.tag.ADVB?l.advb=u:u.tag.INFN?(l.modal=l.verb,l.verb=u):"NP"==u.type?u.tag.nomn?l.object=u:u.tag.accs?l.subject=u:l[u.tag.CAse]=u:l.pp.push(u),c=u.en+1}n.push(s(l))}return n}e="string"==typeof e?t.Tokens(e).done(["SPACE"],!0):e;var c={tokens:e,parses:[]},g=new t.Morph.Tag("NOUN,Fixd,Name,Surn,Geox,Orgn ");g.ext=new t.Morph.Tag("СУЩ,0,имя,фам,гео,орг ");for(var d=[],m=0;m<e.length;m++)d.push(t.Morph(e[m].toString(),i));for(var y=[],m=0;m<e.length;m++){for(var b=[],v=0;v<d[m].length;v++){var w=d[m][v],k=w.tag;if(k&&k.POS){k.LATN&&(w.tag=g);var N=r.fromParse(m,e[m],w);if(k.Abbr){if(m==e.length-1||"."!=e[m+1].toString()[0])continue;N.append(e[m+1],d[m+1][0])}y.push(N)}b.push(w)}c.parses.push(b)}d=c.parses;for(var m=0;m<y.length;m++){var k=y[m].tag;k.POS in c||(c[k.POS]=[]),c[k.POS].push(s(y[m]))}c.NP=c.NM=o((c.NOUN||[]).concat(c.NPRO||[])),c.NP=c.NP.concat(a((c.NOUN||[]).concat(c.NPRO||[])));var A=l(c.NP);c.NP=c.NP.concat(A,l(A)),c.PP=h(c.NP),A=u(c.NP,c.PP),c.NP=c.NP.concat(A);var P=h(A);A=u(c.NP,P),c.NP=c.NP.concat(A);var x=u(c.PRTF||[],c.PP);return c.PRTF=(c.PRTF||[]).concat(x),c.NP=c.NP.concat(p(x)),c.VP=f(c.VERB||[],c.NP.concat(c.PP,c.INFN||[],c.PRCL||[],c.ADVB||[])),c},i.init=function(r,s){function o(){--a||(e=!0,s&&s(null,i))}var a=0;s||"function"!=typeof r||(s=r,r="string"==typeof __dirname?__dirname+"/../dicts":"dicts"),a++,t.load(r+"/preps.json","json",function(t,e){return t?void s(t):(n=e,void o())})},i}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=module.exports||{})&&(module.exports.Tokens=e(module.exports)):"function"==typeof define&&define.amd?define("Az.Tokens",["Az"],e):(t.Az=t.Az||{})&&(t.Az.Tokens=e(t.Az))}(this,function(t){"use strict";function e(){return!0}function n(t,n){if(!t)return e();if("function"==typeof t)return t;var r,i=t;if("length"in t){r=!n,i={};for(var s=0;s<t.length;s++)i[t[s]]=!0}else r=n,n=!1;return function(t,e,s){if(t.subType){var o=t.type+"."+t.subType;if(o in i)return i[o]!=n}return t.type in i?i[t.type]!=n:!r}}for(var r="ac|ad|ae|aero|af|ag|ai|al|am|ao|aq|ar|arpa|as|asia|at|au|aw|ax|az|ba|bb|be|bf|bg|bh|bi|biz|bj|bm|bo|br|bs|bt|bv|bw|by|bz|ca|cat|cc|cd|cf|cg|ch|ci|cl|cm|cn|co|com|coop|cr|cu|cv|cw|cx|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|es|et|eu|fi|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|info|int|io|iq|ir|is|it|je|jo|jobs|jp|kg|ki|km|kn|kp|kr|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mn|mo|mobi|mp|mq|mr|ms|mt|mu|museum|mv|mw|mx|my|na|name|nc|ne|net|nf|ng|nl|no|nr|nu|nz|om|org|pa|pe|pf|ph|pk|pl|pm|pn|post|pr|pro|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tr|travel|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|yt|امارات|հայ|বাংলা|бел|中国|中國|الجزائر|مصر|ею|გე|ελ|香港|भारत|بھارت|భారత్|ભારત|ਭਾਰਤ|ভারত|இந்தியா|ایران|ايران|عراق|الاردن|한국|қаз|ලංකා|இலங்கை|المغرب|мкд|мон|澳門|澳门|مليسيا|عمان|پاکستان|پاكستان|فلسطين|срб|рф|قطر|السعودية|السعودیة|السعودیۃ|السعوديه|سودان|新加坡|சிங்கப்பூர்|سورية|سوريا|ไทย|تونس|台灣|台湾|臺灣|укр|اليمن|xxx|zm|aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|academy|accenture|accountant|accountants|aco|active|actor|adac|ads|adult|aeg|aetna|afamilycompany|afl|africa|africamagic|agakhan|agency|aig|aigo|airbus|airforce|airtel|akdn|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|aol|apartments|app|apple|aquarelle|arab|aramco|archi|army|art|arte|asda|associates|athleta|attorney|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aws|axa|azure|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bbc|bbt|bbva|bcg|bcn|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bharti|bible|bid|bike|bing|bingo|bio|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bms|bmw|bnl|bnpparibas|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|bradesco|bridgestone|broadway|broker|brother|brussels|budapest|bugatti|build|builders|business|buy|buzz|bzh|cab|cafe|cal|call|calvinklein|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|catering|catholic|cba|cbn|cbre|cbs|ceb|center|ceo|cern|cfa|cfd|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|coach|codes|coffee|college|cologne|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|corsica|country|coupon|coupons|courses|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cuisinella|cymru|cyou|dabur|dad|dance|date|dating|datsun|day|dclk|dds|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dnp|docs|dodge|dog|doha|domains|dot|download|drive|dstv|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dwg|earth|eat|edeka|education|email|emerck|emerson|energy|engineer|engineering|enterprises|epost|epson|equipment|ericsson|erni|esq|estate|esurance|etisalat|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|flickr|flights|flir|florist|flowers|flsmidth|fly|foo|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|gal|gallery|gallo|gallup|game|games|gap|garden|gbiz|gdn|gea|gent|genting|george|ggee|gift|gifts|gives|giving|glade|glass|gle|global|globo|gmail|gmbh|gmo|gmx|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gotv|grainger|graphics|gratis|green|gripe|group|guardian|gucci|guge|guide|guitars|guru|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hkt|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|host|hosting|hot|hoteles|hotmail|house|how|hsbc|htc|hughes|hyatt|hyundai|ibm|icbc|ice|icu|ieee|ifm|iinet|ikano|imamat|imdb|immo|immobilien|industries|infiniti|ing|ink|institute|insurance|insure|intel|international|intuit|investments|ipiranga|irish|iselect|ismaili|ist|istanbul|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|jeep|jetzt|jewelry|jio|jlc|jll|jmp|jnj|joburg|jot|joy|jpmorgan|jprs|juegos|juniper|kaufen|kddi|kerryhotels|kerrylogistics|kerryproperties|kfh|kia|kim|kinder|kindle|kitchen|kiwi|koeln|komatsu|kosher|kpmg|kpn|krd|kred|kuokgroup|kyknet|kyoto|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|ltd|ltda|lundbeck|lupin|luxe|luxury|macys|madrid|maif|maison|makeup|man|management|mango|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mcd|mcdonalds|mckinsey|med|media|meet|melbourne|meme|memorial|men|menu|meo|metlife|miami|microsoft|mini|mint|mit|mitsubishi|mlb|mls|mma|mnet|mobily|moda|moe|moi|mom|monash|money|monster|montblanc|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|msd|mtn|mtpc|mtr|multichoice|mutual|mutuelle|mzansimagic|nab|nadex|nagoya|naspers|nationwide|natura|navy|nba|nec|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nfl|ngo|nhk|nico|nike|nikon|ninja|nissan|nissay|nokia|northwesternmutual|norton|now|nowruz|nowtv|nra|nrw|ntt|nyc|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|organic|orientexpress|origins|osaka|otsuka|ott|ovh|page|pamperedchef|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|payu|pccw|pet|pfizer|pharmacy|philips|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|place|play|playstation|plumbing|plus|pnc|pohl|poker|politie|porn|pramerica|praxi|press|prime|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|pub|pwc|qpon|quebec|quest|qvc|racing|raid|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|rocher|rocks|rodeo|rogers|room|rsvp|ruhr|run|rwe|ryukyu|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sbi|sbs|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shopping|shouji|show|showtime|shriram|silk|sina|singles|site|ski|skin|sky|skype|sling|smart|smile|sncf|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|srl|srt|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|sucks|supersport|supplies|supply|support|surf|surgery|suzuki|swatch|swiftcover|swiss|sydney|symantec|systems|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tci|tdk|team|tech|technology|telecity|telefonica|temasek|tennis|teva|thd|theater|theatre|theguardian|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tjmaxx|tjx|tkmaxx|tmall|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|trade|trading|training|travelchannel|travelers|travelersinsurance|trust|trv|tube|tui|tunes|tushu|tvs|ubank|ubs|uconnect|unicom|university|uno|uol|ups|vacations|vana|vanguard|vegas|ventures|verisign|versicherung|vet|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vodka|volkswagen|volvo|vote|voting|voto|voyage|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|कॉम|セール|佛山|慈善|集团|在线|大众汽车|点看|คอม|八卦|موقع|一号店|公益|公司|香格里拉|网站|移动|我爱你|москва|католик|онлайн|сайт|联通|קום|时尚|微博|淡马锡|ファッション|орг|नेट|ストア|삼성|商标|商店|商城|дети|ポイント|新闻|工行|家電|كوم|中文网|中信|娱乐|谷歌|電訊盈科|购物|クラウド|通販|网店|संगठन|餐厅|网络|ком|诺基亚|食品|飞利浦|手表|手机|ارامكو|العليان|اتصالات|بازار|موبايلي|ابوظبي|كاثوليك|همراه|닷컴|政府|شبكة|بيتك|عرب|机构|组织机构|健康|рус|珠宝|大拿|みんな|グーグル|世界|書籍|网址|닷넷|コム|天主教|游戏|vermögensberater|vermögensberatung|企业|信息|嘉里大酒店|嘉里|广东|政务|xperia|xyz|yachts|yahoo|yamaxun|yandex|yodobashi|yoga|yokohama|you|youtube|yun|zappos|zara|zero|zip|zippo|zone|zuerich".split("|"),i={
html:!1,wiki:!1,markdown:!1,hashtags:!0,mentions:!0,emails:!0,links:{protocols:!0,www:!1,tlds:{}}},s={nbsp:" ",quot:'"',gt:">",lt:"<",amp:"&",ndash:"–"},o=0;o<r.length;o++)i.links.tlds[r[o]]=!0;var a=function(t,e,n,r,i,s,o,a){this.source=t,this.st=e,this.length=n,this.index=r,this.firstUpper=i,this.allUpper=s,this.type=o,a&&(this.subType=a)};a.prototype.toString=function(){return"_str"in this&&this._str.length==this.length?this._str:this._str=this.source.substr(this.st,this.length)},a.prototype.indexOf=function(t){if(1==t.length){for(var e=0;e<this.length;e++)if(this.source[this.st+e]==t)return e;return-1}return this.toString().indexOf(t)},a.prototype.toLowerCase=function(){return this.toString().toLocaleLowerCase()},a.prototype.isCapitalized=function(){return this.firstUpper&&!this.allUpper},a.prototype.en=function(){return this.st+this.length-1};var l=function(e,n){return this instanceof l?(this.tokens=[],this.source="","string"==typeof e?(this.config=n?t.extend(i,n):i,this.append(e)):this.config=e?t.extend(i,e):i,this.index=-1,void 0):new l(e,n)};return l.WORD=new String("WORD"),l.NUMBER=new String("NUMBER"),l.OTHER=new String("OTHER"),l.DIGIT=new String("DIGIT"),l.CYRIL=new String("CYRIL"),l.LATIN=new String("LATIN"),l.MIXED=new String("MIXED"),l.PUNCT=new String("PUNCT"),l.SPACE=new String("SPACE"),l.MARKUP=new String("MARKUP"),l.NEWLINE=new String("NEWLINE"),l.EMAIL=new String("EMAIL"),l.LINK=new String("LINK"),l.HASHTAG=new String("HASHTAG"),l.MENTION=new String("MENTION"),l.TAG=new String("TAG"),l.CONTENT=new String("CONTENT"),l.SCRIPT=new String("SCRIPT"),l.STYLE=new String("STYLE"),l.COMMENT=new String("COMMENT"),l.CLOSING=new String("CLOSING"),l.TEMPLATE=new String("TEMPLATE"),l.RANGE=new String("RANGE"),l.ENTITY=new String("ENTITY"),l.prototype.append=function(e,n){n=n?t.extend(this.config,n):this.config,n.links&&n.links.tlds===!0&&(n.links.tlds=i.links.tlds);var r=this.source.length;this.source+=e;for(var o=this.source,h=this.tokens,u=r;u<o.length;u++){var p=o[u],f=o.charCodeAt(u),c=!1,g=h.length-1,d=h[g],m=u;if(n.html&&";"==p)if(g>0&&d.type===l.WORD&&1==h[g-1].length&&"&"==o[h[g-1].st]){var y=d.toLowerCase();y in s&&(p=s[y],f=p.charCodeAt(0),g-=2,d=h[g],h.length=g+1)}else g>1&&(d.type===l.NUMBER||d.type===l.WORD&&"x"==o[d.st])&&1==h[g-1].length&&"#"==o[h[g-1].st]&&1==h[g-1].length&&"&"==o[h[g-1].st]&&(f="x"==o[d.st]?parseInt(d.toString().substr(1),16):parseInt(d.toString(),10),p=String.fromCharCode(f),g-=3,d=h[g],h.length=g+1);var b=l.OTHER,v=p.toLocaleLowerCase()!=p;f>=1024&&f<=1279&&(b=l.CYRIL),(f>=65&&f<=90||f>=97&&f<=122||f>=192&&f<=591)&&(b=l.LATIN),f>=48&&f<=57&&(b=l.DIGIT),(f<=32||f>=128&&f<=160)&&(b=l.SPACE),"‐-−‒–—―.…,:;?!¿¡()[]«»\"'’‘’“”/⁄".indexOf(p)>-1&&(b=l.PUNCT);var w=b,k=!1;b===l.CYRIL||b===l.LATIN?(w=l.WORD,k=b):b===l.DIGIT&&(w=l.NUMBER);var N=!d||"\n"==o[d.st+d.length-1];if(n.wiki&&(N&&":;*#~|".indexOf(p)>-1&&(w=l.MARKUP,k=l.NEWLINE),"={[|]}".indexOf(p)>-1&&(w=l.MARKUP)),n.markdown&&(N&&"=-#>+-".indexOf(p)>-1&&(w=l.MARKUP,k=l.NEWLINE),"[]*~_`\\".indexOf(p)>-1&&(w=l.MARKUP)),d)if(n.wiki&&"'"!=p&&1==d.length&&"'"==o[d.st]&&g>0&&h[g-1].type===l.WORD&&h[g-1].subType===l.LATIN&&(h[g-1].length+=d.length,g-=1,h.length=g+1,d=h[g]),n.links&&n.links.tlds&&(b===l.PUNCT||b===l.SPACE)&&h.length>2&&h[g-2].type===l.WORD&&1==h[g-1].length&&"."==o[h[g-1].st]&&h[g].type===l.WORD&&d.toString()in n.links.tlds){for(;g>=2&&h[g-2].type===l.WORD&&1==h[g-1].length&&("."==o[h[g-1].st]||"@"==o[h[g-1].st]||":"==o[h[g-1].st]);)g-=2,d=h[g],d.length+=h[g+1].length+h[g+2].length,d.allUpper=d.allUpper&&h[g+1].allUpper&&h[g+2].allUpper;n.emails&&d.indexOf("@")>-1&&d.indexOf(":")==-1?d.type=l.EMAIL:(d.type=l.LINK,"/"==p&&(c=!0)),h.length=g+1}else if(d.type===l.LINK)")"==p&&g>=1&&h[g-1].type===l.MARKUP&&1==h[g-1].length&&"("==o[h[g-1].st]?w=l.MARKUP:b!==l.SPACE&&","!=p&&"<"!=p&&(c=!0);else if(d.type===l.EMAIL)b!==l.CYRIL&&b!==l.LATIN&&"."!=p||(c=!0);else if(d.type===l.HASHTAG||d.type===l.MENTION)(b===l.CYRIL||b==l.LATIN||b==l.DIGIT||"_"==p||"@"==p&&d.indexOf("@")==-1)&&(c=!0);else if(d.type!==l.TAG||!d.quote&&">"==o[d.en()])if(d.type===l.CONTENT)c=!0,d.quote?p==d.quote&&"\\"!=o[d.en()]&&delete d.quote:'"'==p||"'"==p?d.quote=p:">"==p&&(d.length>=8&&"</script"==d.toString().substr(-8)?(d.length-=8,m-=8,c=!1,w=l.TAG,k=l.CLOSING):d.length>=7&&"</style"==d.toString().substr(-7)&&(d.length-=7,m-=7,c=!1,w=l.TAG,k=l.CLOSING));else if(d.type===l.TAG&&d.type!==l.CLOSING&&d.length>=8&&"script"==d.toLowerCase().substr(1,6))w=l.CONTENT,k=l.SCRIPT;else if(d.type===l.TAG&&d.type!==l.CLOSING&&d.length>=7&&"style"==d.toLowerCase().substr(1,5))w=l.CONTENT,k=l.STYLE;else if(!n.html||1!=d.length||"<"!=o[d.st]||b!==l.LATIN&&"!"!=p&&"/"!=p)if(d.type===l.CONTENT)c=!0;else if(d.type!==l.MARKUP||d.subType!=l.TEMPLATE||"}"==o[d.en()]&&"}"==o[d.en()-1]){if(d.type===l.MARKUP&&d.type===l.LINK&&")"!=o[d.en()])c=!0;else if(d.type===l.MARKUP&&"`"==o[d.st]&&d.subType===l.NEWLINE&&b===l.LATIN)c=!0;else if(b===l.CYRIL||b===l.LATIN)d.type===l.WORD?(c=!0,d.subType=d.subType==b?d.subType:l.MIXED):d.type===l.NUMBER?(c=!0,d.subType=d.subType&&d.subType!=b?l.MIXED:b):n.hashtags&&1==d.length&&"#"==o[d.st]?(c=!0,d.type=l.HASHTAG):!n.mentions||1!=d.length||"@"!=o[d.st]||0!=g&&h[g-1].type!==l.SPACE?b!==l.LATIN||1!=d.length||"'"!=o[d.st]&&"’"!=o[d.st]?1==d.length&&"-"==o[d.st]&&(c=!0,g>0&&h[g-1].type===l.NUMBER&&(d=h[g-1],d.length+=h[g].length,h.length-=1),d.type=l.WORD,d.subType=b):(c=!0,d.type=l.WORD,d.subType=l.LATIN):(c=!0,d.type=l.MENTION);else if(b===l.DIGIT)d.type===l.WORD?(c=!0,d.subType=l.MIXED):d.type===l.NUMBER?c=!0:1!=d.length||"+"!=o[d.st]&&"-"!=o[d.st]?1==d.length&&(","==o[d.st]||"."==o[d.st])&&h.length>1&&h[g-1].type===l.NUMBER&&(c=!0,d=h[g-1],d.length+=h[g].length,h.length-=1):(c=!0,g>0&&h[g-1].type===l.NUMBER&&(d=h[g-1],d.length+=h[g].length,d.subType=l.RANGE,h.length-=1),d.type=l.NUMBER);else if(b===l.SPACE)d.type===l.SPACE&&(c=!0);else if(d.type===l.MARKUP&&o[d.st]==p&&"=-~:*#`'>_".indexOf(p)>-1)c=!0;else if("."==p)n.links&&n.links.www&&3==d.length&&"www"==d.toLowerCase()&&(c=!0,d.type=l.LINK);else if(n.wiki&&"'"==p&&"'"==o[d.en()])d.length>1?(d.length--,m--,w=l.MARKUP):(c=!0,d.type=l.MARKUP);else if("-"==p||d.subType==l.LATIN&&("’"==p||"'"==p))d.type===l.WORD&&(c=!0);else if("/"==p)n.links&&n.links.protocols&&h.length>2&&h[g-2].type===l.WORD&&h[g-2].subType==l.LATIN&&1==h[g-1].length&&":"==o[h[g-1].st]&&1==h[g].length&&"/"==o[h[g].st]&&(c=!0,d=h[g-2],d.length+=h[g-1].length+h[g].length,d.allUpper=d.allUpper&&h[g-1].allUpper&&h[g].allUpper,d.type=l.LINK,h.length-=2);else if(n.html&&";"==p)g>0&&d.type===l.WORD&&1==h[g-1].length&&"&"==o[h[g-1].st]?(c=!0,d=h[g-1],d.length+=h[g].length,d.allUpper=d.allUpper&&h[g-1].allUpper,d.type=l.ENTITY,h.length-=1):g>1&&(d.type===l.WORD||d.type===l.NUMBER)&&1==h[g-1].length&&"#"==o[h[g-1].st]&&1==h[g-2].length&&"&"==o[h[g-2].st]&&(c=!0,d=h[g-2],d.length+=h[g-1].length+h[g].length,d.allUpper=d.allUpper&&h[g-1].allUpper&&h[g].allUpper,d.type=l.ENTITY,h.length-=2);else if(n.markdown&&"["==p&&1==d.length&&"!"==o[d.st])c=!0,d.type=l.MARKUP;else if(n.markdown&&"("==p&&1==d.length&&"]"==o[d.st])w=l.MARKUP,k=l.LINK;else if(n.wiki&&"{"==p&&1==d.length&&"{"==o[d.st])c=!0,d.type=l.MARKUP,d.subType=l.TEMPLATE;else if(n.wiki&&"["==p&&1==d.length&&"["==o[d.st])c=!0;else if(n.wiki&&"]"==p&&1==d.length&&"]"==o[d.st])c=!0;else if(n.wiki&&"|"==p&&!N){for(var A=-1,P=g-1;P>=0;P--){if(2==h[P].length&&"["==o[h[P].st]&&"["==o[h[P].st+1]){A=P;break}if(1==h[P].length&&"|"==o[h[P].st]||h[P].indexOf("\n")>-1)break}if(A>-1){c=!0;for(var P=g-1;P>=A;P--)d=h[P],d.length+=h[P+1].length,d.allUpper=d.allUpper&&h[P+1].allUpper;g=A,h.length=g+1,d.subType=l.LINK}}}else c=!0;else c=!0,d.type=l.TAG,"!"==p?d.subType=l.COMMENT:"/"==p&&(d.subType=l.CLOSING);else c=!0,d.quote?p==d.quote&&"\\"!=o[d.en()]&&delete d.quote:'"'!=p&&"'"!=p||(d.quote=p);c?(d.length++,d.allUpper=d.allUpper&&v):(d=new a(o,m,u+1-m,h.length,v,v,w,k),h.push(d))}return this},l.prototype.done=function(t,e){if(!t)return this.tokens;for(var r=n(t,e),i=[],s=0;s<this.tokens.length;s++)r(this.tokens[s],s,this.tokens)&&i.push(this.tokens[s]);return i},l.prototype.get=function(t,e,r){if(t<0)return!1;if(!e)return this.tokens[t];for(var i=n(e,r),s=0,o=0;o<this.tokens.length;o++)if(i(this.tokens[o],o,this.tokens)){if(s==t)return this.tokens[o];s++}return!1},l.prototype.count=function(t,e){if(!t)return this.tokens.length;for(var r=n(t,e),i=0,s=0;s<this.tokens.length;s++)r(this.tokens[s],s,this.tokens)&&i++;return i},l.prototype.nextToken=function(t,e,r){var i=n(e,r),s=this.index;for(s++;s<this.tokens.length&&i(this.tokens[s],s,this.tokens);)s++;return s<this.tokens.length?(t&&(this.index=s),this.tokens[s]):null},l.prototype.punctAhead=function(){var t=this.nextToken(!1,["SPACE"],!0);return t&&"PUNCT"==t.type&&t},l.prototype.prevToken=function(t,e,r){var i=n(e,r),s=this.index;for(s--;s>=0&&i(this.tokens[s],s,this.tokens);)s--;return s>=0?(t&&(this.index=s),this.tokens[s]):null},l.prototype.punctBehind=function(){var t=this.prevToken(!1,["SPACE"],!0);return t&&"PUNCT"==t.type&&t},l.prototype.hasTokensAhead=function(t,e){return null!=this.nextToken(!1,t,e)},l.prototype.hasTokensBehind=function(t,e){return null!=this.prevToken(!1,t,e)},l});
//# sourceMappingURL=az.min.js.map
