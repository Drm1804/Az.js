<html>
<head>
  <meta charset="utf-8">
  <title>Az Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
  <!--[if lte IE 8]>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
      <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->
  <script src="dist/az.min.js"></script>
</head>
<body style="padding: 20px">
  <form class="pure-form pure-form-aligned">
    <fieldset>
      <div class="pure-control-group">
        <label for="word">Слово для разбора</label>
        <input id="word" type="text" placeholder="Слово для разбора">
      </div>
      <h3>Результат разбора</h3>
      <div class="pure-g" id="morphResults">
      </div>
    </fieldset>
  </form>

  <script>
    function showAll(variantId) {
      var el = document.getElementById('allForms' + variantId);
      el.style.display = (el.style.display == 'none') ? 'block' : 'none';
    }
    Az.Morph.init('dicts', function(Morph) {
      //Morph('слово');
      document.getElementById('word').addEventListener('keyup', function() {
        var variants = Az.Morph(this.value, { typos: 'auto' });
        var html = [];
        for (var i = 0; i < variants.length; i++) {
          html.push('<div class="pure-u-1 pure-u-md-1-3">' +
            '<h3>' + variants[i].val + '</h3>' +
            '<div class="pure-g">' +
              '<div class="pure-u-1 pure-u-md-1-2">Граммемы<br/><small>по-русски</small></div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + variants[i].tag.ext.toString() + '</div>' +
              '<div class="pure-u-1 pure-u-md-1-2">Граммемы<br/><small>внутренний формат</small></div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + variants[i].tag.toString() + '</div>' +
              '<div class="pure-u-1 pure-u-md-1-2">Начальная форма</div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + variants[i].normalize()[0] + '</div>' +
              '<div class="pure-u-1 pure-u-md-1-2">Начальная форма<br/><small>(та же часть речи)</small></div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + variants[i].normalize(true)[0] + '</div>' +
              '<div class="pure-u-1 pure-u-md-1-2">Устранено повторов букв</div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + variants[i].stutterCnt + '</div>' +
              '<div class="pure-u-1 pure-u-md-1-2">Устранено опечаток</div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + variants[i].typosCnt + '</div>' +
              '<div class="pure-u-1"><a href="#" onclick="showAll(' + i + '); return false;">Показать все формы</a></div>' +
                '<div id="allForms' + i + '" style="display: none">');
          for (var formIdx = 0; formIdx < variants[i].paradigm.length / 3; formIdx++) {
            var form = variants[i].inflect(formIdx);
            html.push(
              '<div class="pure-u-1 pure-u-md-1-2"><strong>' + form[0] + '</strong></div>' +
                '<div class="pure-u-1 pure-u-md-1-2">' + form[1].ext.toString() + '</div>');
          }
          html.push('</div>' +
            '</div>' +
          '</div>');
        }
        if (!html.length) {
          html.push('<div class="pure-u-1"><i>Нет вариантов</i></div>');
        }
        document.getElementById('morphResults').innerHTML = html.join('');
      }, false);
    });
  </script>
</body>
</html>